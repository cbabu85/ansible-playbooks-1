---
  - hosts: all
    user: "{{ system_default_user }}"
    sudo: yes
    vars_files:
      - "group_vars/all.yml"
      - "group_vars/vault.yml"
    vars:
      playbook_name: allservers
      postfix_aliases:
        - { user: root, alias: ops@aptrust.org }
        - { user: ubuntu, alias: ops@aptrust.org }
        - { user: postmaster, alias: ops@aptrust.org }
      postfix_AWS_aliases:
        - { user: "@{{ ansible_fqdn}}", alias: ops@aptrust.org }

      postfix_relayhost: email-smtp.us-east-1.amazonaws.com
      postfix_relayhost_port: 25
      postfix_relaytls: true
      # AWS IAM SES credentials (not access key):
      postfix_sasl_user: "{{ var_postfix_sasl_user }}"
      postfix_sasl_password: "{{ var_postfix_sasl_password }}"
    roles:
      - hostname
      - common
      - postfix
      - logwatch
      - ssh
      - unattended-upgrades

